(()=>{"use strict";var r={706:(r,e,n)=>{n.r(e),n.d(e,{newUserDao:()=>i,findUsernameDao:()=>p,updated_atDao:()=>d,findDepartmentDao:()=>m});var t=n(373),a=n.n(t),u=n(531),s=n.n(u),o=n(856);function i(r,e,n,t,a,u,s,o,i,p,f,d){return c.apply(this,arguments)}function c(){return(c=a()(s().mark((function r(e,n,t,a,u,i,c,p,f,d,l,m){return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,s){return o.Z.create({name:e,lastname:n,gender:t,email:a,username:u,password:i,department:c,role:p,active:f,access:d,created_at:l,updated_at:m},(function(e,n){if(e)return s(e);r(n)}))})));case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function p(r){return f.apply(this,arguments)}function f(){return(f=a()(s().mark((function r(e){return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,n){return o.Z.findOne({username:e},(function(e,t){if(e)return n(e);r(t)}))})));case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function d(r,e){return l.apply(this,arguments)}function l(){return(l=a()(s().mark((function r(e,n){return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,t){return o.Z.updateOne({username:e},{updated_at:n},(function(e,n){if(e)return t(e);r(n)}))})));case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function m(r){return h.apply(this,arguments)}function h(){return(h=a()(s().mark((function r(e){return s().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,n){return o.Z.find({department:e},(function(e,t){if(e)return n(e);r(t)}))})));case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}},791:(r,e,n)=>{n.r(e),n.d(e,{default:()=>t});const t=(0,n(619).connect)("mongodb+srv://".concat(process.env.MONGODB_USER,":").concat(process.env.MONGODB_PASSWORD,"@cluster0.nkdgo.mongodb.net/").concat(process.env.MONGODB_DB,"?retryWrites=true&w=majority"),{useNewUrlParser:!0,useUnifiedTopology:!0,useFindAndModify:!1,useCreateIndex:!0}).then((function(){return console.log("DataBase Connected")}),(function(r){return console.log("DataBase Error ",r)}))},856:(r,e,n)=>{n.d(e,{Z:()=>u});var t=n(619),a=(0,t.Schema)({name:{type:String},lastname:{type:String},gender:{type:String},email:{type:String},username:{type:String},password:{type:String},department:{type:String},active:{type:Boolean},access:{marketing:{type:Boolean},rrhh:{type:Boolean},tech:{type:Boolean},spanish:{type:Boolean}},role:{type:String},created_at:{type:String},updated_at:{type:String}});const u=(0,t.model)("users",a)},373:r=>{r.exports=require("@babel/runtime/helpers/asyncToGenerator")},531:r=>{r.exports=require("@babel/runtime/regenerator")},334:r=>{r.exports=require("dotenv")},470:r=>{r.exports=require("moment")},619:r=>{r.exports=require("mongoose")}},e={};function n(t){var a=e[t];if(void 0!==a)return a.exports;var u=e[t]={exports:{}};return r[t](u,u.exports,n),u.exports}n.n=r=>{var e=r&&r.__esModule?()=>r.default:()=>r;return n.d(e,{a:e}),e},n.d=(r,e)=>{for(var t in e)n.o(e,t)&&!n.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})},n.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),n.r=r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},(()=>{const r=require("express");var e=n.n(r);const t=require("morgan");var a=n.n(t);const u=require("cors");var s=n.n(u);const o=require("express-graphql"),i=(0,require("graphql").buildSchema)("\n  type Query {\n\toneWord(word: String!): [Word!]!\n\toneUser(username: String!): User! \n\tuserByDepartment(department: String!): [User!]!\n  }\n\n  type Mutation{\n\tcreateWord(word: String!, published: String!, designerby: String!, username: String!): Word!\n\tnewUser(name: String!, lastname: String!, gender: String!, email: String!, username: String!, password: String!, department: String!, role: String!, marketing: Boolean!, rrhh: Boolean!, tech: Boolean!, spanish: Boolean!): User!\n\tlogin(username: String!, password: String!): User!\n\toneUser(username: String!): User!\n  }\n\n  type Word{\n\tword: String!\n\tpublished: String!\n\tdesignerby: String!\n\tusername: String!\n\tcreated_at: String!\n\tupdated_at: String!\n  }\n\n  type User{\n\tname: String!\n\tlastname: String!\n\tgender: String!\n\tusername: String!\n\temail: String!\n\tdepartment: String!\n\tactive: Boolean!\n\taccess: Access!\n\trole: String!\n\tcreated_at: String!\n\tupdated_at: String!\n  }\n\n  type Access{\n\tmarketing: Boolean\n\trrhh:  Boolean\n\ttech:  Boolean\n\tspanish: Boolean\n  }\n\n  type Login{\n\ttoken: String\n  }\n");var c=n(373),p=n.n(c),f=n(531),d=n.n(f);const l=require("bcrypt");var m=n(470);function h(){return m().format("MMMM Do YYYY, h:mm:ss a")}function g(r,e){return y.apply(this,arguments)}function y(){return(y=p()(d().mark((function r(e,n){return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,l.compareSync)(e,n));case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function w(r){return S.apply(this,arguments)}function S(){return(S=p()(d().mark((function r(e){var n,t;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=(0,l.genSaltSync)(10),t=(0,l.hashSync)(e,n),r.abrupt("return",t);case 4:case"end":return r.stop()}}),r)})))).apply(this,arguments)}var b=n(706),x=b.newUserDao,v=b.findUsernameDao,k=b.updated_atDao,U=b.findDepartmentDao;function B(r,e,n,t,a,u,s,o,i,c,p,f){return _.apply(this,arguments)}function _(){return(_=p()(d().mark((function r(e,n,t,a,u,s,o,i,c,p,f,l){return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,x(e,n,t,a,u,s,o,i,c,p,f,l);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function D(r){return O.apply(this,arguments)}function O(){return(O=p()(d().mark((function r(e){return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v(e);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function P(r,e){return q.apply(this,arguments)}function q(){return(q=p()(d().mark((function r(e,n){return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,k(e,n);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function M(r){return W.apply(this,arguments)}function W(){return(W=p()(d().mark((function r(e){return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,U(e);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))).apply(this,arguments)}var T=n(619),j=(0,T.Schema)({word:{type:String},published:{type:String},designerby:{type:String},username:{type:String},created_at:{type:String},updated_at:{type:String}});const Z=(0,T.model)("worduploads",j);function R(r,e,n,t,a,u){return A.apply(this,arguments)}function A(){return(A=p()(d().mark((function r(e,n,t,a,u,s){return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,o){return Z.create({word:e,published:n,designerby:t,username:a,created_at:u,updated_at:s},(function(e,n){if(e)return o(e);r(n)}))})));case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function G(r){return N.apply(this,arguments)}function N(){return(N=p()(d().mark((function r(e){return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,n){return Z.find({word:e},(function(e,t){if(e)return n(e);r(t)}))})));case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function Y(r){return C.apply(this,arguments)}function C(){return(C=p()(d().mark((function r(e){return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,n){return Z.findOne({word:e},(function(e,t){if(e)return n(e);r(t)}))})));case 1:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function E(r,e,n,t,a,u){return F.apply(this,arguments)}function F(){return(F=p()(d().mark((function r(e,n,t,a,u,s){return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,R(e,n,t,a,u,s);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function H(r){return I.apply(this,arguments)}function I(){return(I=p()(d().mark((function r(e){return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,G(e);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))).apply(this,arguments)}function L(r){return Q.apply(this,arguments)}function Q(){return(Q=p()(d().mark((function r(e){return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Y(e);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))).apply(this,arguments)}const V={createWord:function(){var r=p()(d().mark((function r(e,n,t){var a,u,s;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.Word,r.next=3,L(e.word);case 3:if(a=r.sent,u=h(),a){r.next=10;break}return r.next=8,E(e.word,e.published,e.designerby,e.username,u,u);case 8:return s=r.sent,r.abrupt("return",s);case 10:return r.abrupt("return",null);case 11:case"end":return r.stop()}}),r)})));return function(e,n,t){return r.apply(this,arguments)}}(),oneWord:($=p()(d().mark((function r(e,n,t,a){var u;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.Word,r.next=3,H(e.word);case 3:if(u=r.sent){r.next=6;break}return r.abrupt("return",null);case 6:return r.abrupt("return",u);case 7:case"end":return r.stop()}}),r)}))),function(r,e,n,t){return $.apply(this,arguments)}),newUser:(X=p()(d().mark((function r(e,n,t){var a,u,s,o,i;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.User,a=h(),r.next=4,D(e.username);case 4:return u=r.sent,r.next=7,w(e.password);case 7:if(s=r.sent,o={marketing:e.marketing,rrhh:e.rrhh,tech:e.tech,spanish:e.spanish},u){r.next=16;break}return r.next=12,B(e.name,e.lastname,e.gender,e.email,e.username,s,e.department,e.role,!0,o,a,a);case 12:return i=r.sent,r.abrupt("return",i);case 16:return r.abrupt("return",null);case 17:case"end":return r.stop()}}),r)}))),function(r,e,n){return X.apply(this,arguments)}),oneUser:(K=p()(d().mark((function r(e,n,t){var a;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.User,r.next=3,D(e.username);case 3:if(a=r.sent){r.next=6;break}return r.abrupt("return",null);case 6:return r.next=8,a;case 8:return r.abrupt("return",r.sent);case 9:case"end":return r.stop()}}),r)}))),function(r,e,n){return K.apply(this,arguments)}),userByDepartment:(J=p()(d().mark((function r(e,n,t){var a;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.User,r.next=3,M(e.department);case 3:if(a=r.sent){r.next=6;break}return r.abrupt("return",null);case 6:return r.abrupt("return",a);case 7:case"end":return r.stop()}}),r)}))),function(r,e,n){return J.apply(this,arguments)}),login:(z=p()(d().mark((function r(e,n,t){var a;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.User,r.next=3,D(e.username);case 3:if(a=r.sent){r.next=6;break}return r.abrupt("return",null);case 6:if(1!=a.active){r.next=13;break}if(!g(e.password,a.password)){r.next=11;break}return r.next=10,P(a.username,h());case 10:return r.abrupt("return",a);case 11:r.next=14;break;case 13:return r.abrupt("return",null);case 14:case"end":return r.stop()}}),r)}))),function(r,e,n){return z.apply(this,arguments)})};var z,J,K,X,$,rr=n(856),er=e()();n(334).config(),er.set("port",process.env.PORT),er.use(a()("dev")),er.use(s()({origin:"*"})),er.use(e().urlencoded({extended:!0})),er.use(e().json()),n(791),er.use("/graphql",(0,o.graphqlHTTP)({schema:i,rootValue:V,context:{Word:Z,User:rr.Z},graphiql:!0})),er.listen(process.env.PORT,(function(){console.log("Server run on port",process.env.PORT)}))})()})();